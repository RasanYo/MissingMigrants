(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(979)}])},979:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return F}});var a=t(5893),s=t(7294);t(687);var r=t(4440),n=t(3875),i=e=>{let{value:l,onChange:t,opacity:s,disabled:i,...o}=e;return(0,a.jsx)(r.Z,{component:"form",sx:{"& .MuiTextField-root":{width:"100%",backgroundColor:"rgba(31, 41, 55, ".concat(s,")"),color:"#fff",borderRadius:2},"& .MuiFilledInput-underline:before":{borderBottom:"none"},"& .MuiFilledInput-input":{padding:"14px 18px",color:"#fff"},"& .MuiFormLabel-root":{color:i?"rgb(31 41 55)":"#fff"}},noValidate:!0,autoComplete:"on",...o,children:(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{fullWidth:!0,id:"filled-multiline-static",label:"Keywords",multiline:!0,rows:3,placeholder:"Give in the keywords you want to search on",variant:"filled",value:l,onChange:t,disabled:i,...o})})})},o=t(6799),c=t(5416),d=t(9376),u=t(8878);let h=[{value:"english",label:"English"},{value:"spanish",label:"Spanish"},{value:"french",label:"French"},{value:"german",label:"German"},{value:"italian",label:"Italian"},{value:"portuguese",label:"Portuguese"},{value:"dutch",label:"Dutch"},{value:"russian",label:"Russian"},{value:"japanese",label:"Japanese"},{value:"chinese",label:"Chinese"},{value:"korean",label:"Korean"},{value:"arabic",label:"Arabic"},{value:"hindi",label:"Hindi"},{value:"bengali",label:"Bengali"},{value:"urdu",label:"Urdu"},{value:"turkish",label:"Turkish"}];class x extends s.Component{render(){let{value:e,onChange:l,opacity:t,disabled:s,...n}=this.props;return(0,a.jsx)(r.Z,{children:(0,a.jsxs)(o.Z,{fullWidth:!0,children:[(0,a.jsx)(c.Z,{id:"language-label",style:{color:s?"rgb(31, 41, 55)":"#fff"},children:"Select Language"}),(0,a.jsx)(d.Z,{labelId:"language-label",id:"language-select",multiple:!0,value:e,onChange:l,label:"Select Language",style:{backgroundColor:"rgba(31, 41, 55, ".concat(t,")"),color:"#fff"},...n,disabled:s,MenuProps:{PaperProps:{style:{backgroundColor:"#374151"}},MenuListProps:{style:{"::WebkitScrollbarThumb":{backgroundColor:"#1f2937"}}}},children:h.map(e=>(0,a.jsx)(u.Z,{value:e.value,style:{backgroundColor:"#374151",color:"#fff"},children:e.label},e.value))})]})})}}var g=e=>{let{startValue:l,onChangeStartValue:t,endValue:s,onChangeEndValue:r,opacity:i,disabled:o,...c}=e,d={backgroundColor:"rgba(31, 41, 55, ".concat(i,")"),color:"#fff",borderRadius:"8px",marginRight:"10px"},u=o?"rgb(31 41 55)":"#fff";return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,{id:"start-date",label:"Select Start Date",type:"date",value:l,onChange:e=>t(e.target.value),InputProps:{style:d},disabled:o,...c,InputLabelProps:{style:{color:u},shrink:!0}}),(0,a.jsx)(n.Z,{id:"end-date",label:"Select End Date",type:"date",value:s,onChange:e=>r(e.target.value),InputProps:{style:{...d,textAlign:"right",marginLeft:"10px"}},disabled:o,...c,InputLabelProps:{style:{color:u},shrink:!0}})]})},m=t(8163);function f(e){let{state:l}=e,t="#0035A0ff",s={0:{percentage:"10",textColors:[t]},1:{percentage:"35",textColors:[t,t]},2:{percentage:"65",textColors:[t,t,t]},3:{percentage:"100",textColors:[t,t,t,t]},default:{percentage:"10",textColors:[t]}},{percentage:r,textColors:n}=s[l]||s.default;return(0,a.jsxs)("div",{className:"mb-10",children:[(0,a.jsx)("h4",{className:"sr-only",children:"Status"}),(0,a.jsxs)("div",{className:"mt-6","aria-hidden":"true",children:[(0,a.jsx)("div",{className:"overflow-hidden rounded-full bg-gray-800",children:(0,a.jsx)("div",{className:"h-2 rounded-full",style:{backgroundColor:t,width:"".concat(r,"%")}})}),(0,a.jsx)("div",{className:"mt-2 hidden grid-cols-4 text-sm font-medium sm:grid",children:n.map((e,l)=>(0,a.jsx)("div",{className:3===l?"text-right":1===l||2===l?"text-center":"",style:{color:e},children:function(e){switch(e){case 0:default:return"Make query";case 1:return"Search articles";case 2:return"Compare articles";case 3:return"Done"}}(l)},l))})]})]})}var p=t(442),b=t(6657),j=t(6529),v=t(6601),y=t(4246),w=t(7574),N=t(3367),C=t(8271);function k(e){let{articles:l,setArticles:t}=e,[r,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)([]),c=e=>{o(l=>[...l,e])};return(0,a.jsx)(a.Fragment,{children:l.map((e,l)=>i.includes(e)?null:(0,a.jsxs)(p.Z,{sx:{backgroundColor:"#374151",color:"#fff"},children:[(0,a.jsxs)(b.Z,{expandIcon:(0,a.jsx)(v.Z,{style:{color:"#fff"}}),"aria-controls":"panel-content-".concat(l),id:"panel-header-".concat(l),sx:{backgroundColor:"#4b5563"},children:[(0,a.jsx)(y.Z,{children:e.title}),(0,a.jsx)(N.Z,{onClick:l=>{l.stopPropagation(),c(e)},color:"inherit",edge:"end",size:"small",sx:{marginLeft:"auto"},children:(0,a.jsx)(C.Z,{})})]}),(0,a.jsxs)(j.Z,{sx:{flexDirection:"column",color:"#E5E7EB"},children:[(0,a.jsxs)(y.Z,{variant:"subtitle1",children:["Description: ",e.description]}),(0,a.jsxs)(y.Z,{variant:"body2",sx:{mt:1},children:["Published: ",new Date(e.publishedDate).toLocaleDateString()]}),(0,a.jsx)(w.Z,{href:e.url,color:"secondary",target:"_blank",rel:"noopener",sx:{mt:1},children:"Read more"})]})]},l))})}var S=t(3585),Z=t(9145),D=t(5486),I=t(7586),_=t(4413),E=t(4418);function L(e){let{items:l,searchPressed:t}=e,[r,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),c=e=>{o(e),n(!0)},d=()=>{o(null),n(!1)},u=(0,s.useRef)(null);return((0,s.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&d()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u]),t&&l&&0!==l.length)?(0,a.jsxs)(a.Fragment,{children:[r&&i&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{ref:u,className:"bg-gray-800 p-8 rounded-xl shadow-lg w-1/2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center",children:[(0,a.jsx)("span",{children:"Incident Details"}),(0,a.jsx)(S.Z,{style:{color:"white",marginLeft:"0.5rem",cursor:"pointer"},onClick:d})]})}),(0,a.jsxs)("table",{className:"table-auto text-sm text-gray-300 w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"w-1/5 text-left py-2",children:[(0,a.jsx)(Z.Z,{})," Region"]}),(0,a.jsxs)("th",{className:"w-1/5 text-left py-2",children:[(0,a.jsx)(D.Z,{})," Dead"]}),(0,a.jsxs)("th",{className:"w-1/5 text-left py-2",children:[(0,a.jsx)(I.Z,{})," Missing"]}),(0,a.jsxs)("th",{className:"w-1/5 text-left py-2",children:[(0,a.jsx)(_.Z,{})," Cause of Death"]}),(0,a.jsxs)("th",{className:"w-1/5 text-left py-2 px-4",children:[(0,a.jsx)(E.Z,{})," Origin"]})]})}),(0,a.jsx)("tbody",{children:i.map((e,l)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"w-1/5 py-2 px-8",children:e.country||"N/A"}),(0,a.jsx)("td",{className:"w-1/5 py-2 px-8",children:e.deads||"N/A"}),(0,a.jsx)("td",{className:"w-1/5 py-2 px-8",children:e.missing||"N/A"}),(0,a.jsx)("td",{className:"w-1/5 py-2 px-8",children:e.cause_death||"N/A"}),(0,a.jsx)("td",{className:"w-1/5 py-2 px-12",children:e.country_origin||"N/A"})]},l))})]}),(0,a.jsx)("button",{className:"mt-6 px-3 py-1 text-sm font-medium text-gray-900 bg-gray-200 rounded-xl shadow-sm hover:bg-gray-300",onClick:d,children:"Close"})]})}),(0,a.jsx)("ul",{role:"list",className:"space-y-3",children:l.map((e,l)=>{let t=e.length>0?null===e[0].country?"".concat(new Date(e[0].publishedDate).toLocaleDateString()," - <Uncertain>"):"".concat(new Date(e[0].publishedDate).toLocaleDateString()," - ").concat(e[0].country):"No Data Available";return(0,a.jsxs)("li",{className:"overflow-hidden rounded-xl bg-gray-900 px-6 py-4 shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-white text-lg font-semibold mb-2",children:t}),(0,a.jsx)(S.Z,{style:{color:"white",cursor:"pointer"},onClick:()=>c(e)})]}),(0,a.jsx)(k,{articles:e,setArticles:o})]},l)})})]}):null}var P=t(4934),A=t(9008),M=t.n(A);function F(){let[e,l]=(0,s.useState)(""),[t,r]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,p]=(0,s.useState)([]),[b,j]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[w,N]=(0,s.useState)("0.9"),[C,k]=(0,s.useState)([]),[S,Z]=(0,s.useState)(!1),[D,I]=(0,s.useState)("0"),[_,E]=(0,s.useState)(!1),[A,F]=(0,s.useState)(""),T=e=>{let l=[];for(let t in e){let a=[];for(let l in e[t]){let s=e[t][l];a.push({title:s.title,description:s.description,publishedDate:s["published date"],url:s.url,publisher:{href:s.publisher.href,title:s.publisher.title},article:{title:s.article.title,text:s.article.text},country:s.vector["Country of Incident"],deads:s.vector["Number of Dead"],missing:s.vector["Minimum Estimated Number of Missing"],cause_death:s.vector["Cause of Death"],country_origin:s.vector["Country of Origin"]})}l.push(a)}return l};return(0,a.jsxs)("div",{children:[(0,a.jsxs)(M(),{children:[(0,a.jsx)("link",{rel:"icon",href:"/images/logo.ico"}),(0,a.jsx)("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",rel:"stylesheet"})]}),(0,a.jsx)("div",{className:"min-h-screen bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url(/images/bg-1.png)"},children:(0,a.jsx)("div",{className:"flex flex-col justify-center items-center ",children:(0,a.jsxs)("div",{className:"max-w-3xl w-full",children:[(0,a.jsx)(f,{state:D}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:space-x-4",children:[(0,a.jsx)("div",{className:"w-full md:w-5/9",children:(0,a.jsx)(i,{value:t,onChange:e=>{r(e.target.value)},disabled:S,opacity:w})}),(0,a.jsxs)("div",{className:"w-full md:w-4/9",children:[(0,a.jsx)("div",{className:"w-full mb-4",children:(0,a.jsx)(x,{value:h,onChange:e=>{let l=e.target.value;p("string"==typeof l?l.split(","):l)},disabled:S,opacity:w})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(g,{startValue:b,onChangeStartValue:j,endValue:v,onChangeEndValue:y,disabled:S,opacity:w})})]})]}),(0,a.jsx)("div",{className:"w-full md:w-2/9 pt-4",children:(0,a.jsx)(n.Z,{required:!0,fullWidth:!0,id:"outlined-required",label:"OpenAI Key",multiline:!0,rows:1,placeholder:"Your Open AI key here",variant:"outlined",value:o,onChange:e=>{c(e.target.value)},disabled:S,sx:{"& .MuiTextField-root":{width:"100%",backgroundColor:"rgba(31, 41, 55, ".concat(w,")"),color:"#fff",borderRadius:2},"& .MuiFilledInput-underline:before":{borderBottom:"none"},"& .MuiFilledInput-input":{padding:"14px 18px",color:"#fff"},"& .MuiFormLabel-root":{color:S?"rgb(31 41 55)":"#fff"}}})}),!S&&(_?(0,a.jsx)("div",{className:"p-3 mt-4 bg-gray-800 text-white opacity-90 inline-block rounded-2xl",children:(0,a.jsx)(P.Z,{size:12})}):(0,a.jsx)(m.Z,{variant:"contained",className:"mt-4 bg-gray-800 hover:bg-gray-700 text-white opacity-90",onClick:()=>{I("1"),N("0.6"),E(!0),I("1"),F(""),console.log("keywords",t),console.log("language",h),console.log("startDate",b),console.log("endDate",v),console.log("openAIkey",o),fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,language:h,startDate:b,endDate:v,openAIkey:o})}).then(e=>e.json()).then(e=>{console.log(e),I("2"),Z(!0),k(T(e)),E(!1),I("3")}).catch(e=>{console.error("Error:",e),I("0"),E(!1),N("0.9"),F("There was an error: ".concat(e.message))})},disabled:S||_,children:"Search"})),(0,a.jsx)("div",{className:"my-5",children:(0,a.jsx)(L,{items:C,searchPressed:S})}),(0,a.jsx)("div",{className:"my-5",children:(0,a.jsx)("p",{className:"text-center text-red-500",children:A})})]})})})]})}}},function(e){e.O(0,[910,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);